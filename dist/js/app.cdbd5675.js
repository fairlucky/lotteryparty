(function(e){function t(t){for(var a,s,i=t[0],c=t[1],l=t[2],d=0,m=[];d<i.length;d++)s=i[d],o[s]&&m.push(o[s][0]),o[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},o={app:0},r=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00a2":function(e,t,n){"use strict";var a=n("500f"),o=n.n(a);o.a},"034f":function(e,t,n){"use strict";var a=n("c21b"),o=n.n(a);o.a},1524:function(e,t,n){},1623:function(e,t,n){"use strict";var a=n("97d1"),o=n.n(a);o.a},2:function(e,t){},"26ac":function(e,t,n){},3:function(e,t){},"390e":function(e,t,n){"use strict";var a=n("632f"),o=n.n(a);o.a},4:function(e,t){},"4dcb":function(e,t,n){},"4e47":function(e,t,n){e.exports=n.p+"img/game_token.16df711d.png"},"500f":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),o=n("5c96"),r=n.n(o),s=(n("0fae"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("navigation",{attrs:{id:"nav"}}),n("trading",{attrs:{id:"trading"}}),n("PageFooter",{attrs:{id:"pagefooter"}})],1)}),i=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#000819","text-color":"#fff","active-text-color":"#66b1ff"}},[a("el-menu-item",{attrs:{index:"0"}},[a("img",{attrs:{src:n("75d6")}})]),a("el-menu-item",{attrs:{index:"1"},on:{click:e.checkIn}},[e._v("签到")]),a("el-menu-item",{attrs:{id:"ref_btn",index:"2"},on:{click:function(t){e.showRef=!0}}},[e._v("邀请奖励")]),a("el-menu-item",{attrs:{id:"community_btn",index:"3"},on:{click:function(t){e.showSocial=!0}}},[e._v("社区")]),a("el-menu-item",{attrs:{id:"howtoplay_btn",index:"4"},on:{click:function(t){e.showHow=!0}}},[e._v("玩法说明")]),e.islogin?e._e():a("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"5"},on:{click:e.login}},[e._v("登录")]),e.islogin?a("el-submenu",{staticStyle:{float:"right"},attrs:{index:"5"}},[a("template",{slot:"title"},[e._v(e._s(e.username))]),a("el-menu-item",{attrs:{index:"5-1"},on:{click:e.logout}},[e._v("退出")])],2):e._e()],1),a("el-dialog",{attrs:{id:"community_dialog",width:"60%",visible:e.showSocial},on:{"update:visible":function(t){e.showSocial=t}}},[a("p",{staticStyle:{color:"#fafafa","text-shadow":"0 0 0.1em rgb(27, 213, 226), -0 -0 0.1em #f87"},attrs:{slot:"title"},slot:"title"},[e._v("加入社区")]),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:6}},[a("span",{on:{click:function(t){e.navigate("twitter")}}},[a("font-awesome-icon",{attrs:{icon:["fab","twitter"]}})],1)]),a("el-col",{attrs:{span:6}},[a("span",{on:{click:function(t){e.navigate("github")}}},[a("font-awesome-icon",{attrs:{icon:["fab","github"]}})],1)]),a("el-col",{attrs:{span:6}},[a("span",{on:{click:function(t){e.navigate("medium")}}},[a("font-awesome-icon",{attrs:{icon:["fab","medium-m"]}})],1)]),a("el-col",{attrs:{span:6}},[a("span",{on:{click:function(t){e.navigate("discord")}}},[a("font-awesome-icon",{attrs:{icon:["fab","discord"]}})],1)])],1)],1),a("el-dialog",{attrs:{width:"60%",visible:e.showRef},on:{"update:visible":function(t){e.showRef=t}}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("推荐获取更多奖励")]),a("span",{staticClass:"referral_name"},[e._v("http://ubet.info?ref="+e._s(e.userName)+" ")]),a("p",[e._v("复制你的推荐链接给朋友，终身获得其10%的投注！你的任何疑问都可以在社区中被回答，那么快快加入吧！")])]),a("el-dialog",{attrs:{width:"60%",visible:e.showHow},on:{"update:visible":function(t){e.showHow=t}}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("如何游戏")]),a("ol",[a("li",[e._v("确保你有一个EOS账户，如果你没有请进官方社区，会有人帮助你！\n            ")]),a("li",[e._v("如果你使用电脑玩，请确保你的chrome浏览器安装了Scatter！"),a("a",{attrs:{href:"//get-scatter.com/",target:"_blank"}},[e._v("Scatter")])]),a("li",[e._v("如果一切就绪，那就开始游戏吧！你可以投注多个EOS，拿到你的幸运卡片和系统奖励！")]),a("li",[e._v("接下来你可以进行一次签到，继续获取系统奖励！")]),a("li",[e._v("如果本局游戏结束，那么就期待一下你会是那个幸运儿吧！")])]),a("p",[e._v("你的任何疑问都可以在社区中被回答，那么快快加入吧！")])])],1)},l=[],u=(n("a481"),n("4917"),n("7f7f"),n("7514"),n("d3b7")),d=n.n(u),m={appName:"UBET EOSLottery",mainToken:"EOS",gameToken:"FP",tokenContract:"eosio.token",gameTokenContract:"fairpartyeco",gameContract:"ubetubetubet",version:"1.1",env:"dev",eosNetwork:{blockchain:"eos",host:"39.106.185.114",port:8888,chainId:"cf057bbfb72640471fd910bcb67639c22df9f92470936cddc1ade0e2f2e7dc4f",protocol:"http"},eosOptions:{broadcast:!0,sign:!0,chainId:"cf057bbfb72640471fd910bcb67639c22df9f92470936cddc1ade0e2f2e7dc4f",httpEndpoint:"http://39.106.185.114:8888"}},f={data:function(){return{activeIndex:"0",userName:"",islogin:!1,dialogVisible:!1,alertInfo:"",alertTitle:"",eosClient:null,scatterEosClient:null,interval:null,showSocial:!1,showHow:!1,showRef:!1}},methods:{getrefferInfo:function(){return"http://ubet.info?ref="+this.userName},navigate:function(e){switch(e){case"twitter":window.open("//twitter.com/ubeteosgame");break;case"medium":window.open("//medium.com/ubeteosgame");break;case"github":window.open("//github.com/ubeteosgame");break;case"discord":window.open("//discordapp.com/channels/482077322070196225/487187255065313292");break}},login:function(){var e=this,t=this;null==window.scatter&&(t.$message({message:"请安装scatter！",type:"warning",duration:3500,center:!0}),window.open("https://chrome.google.com/webstore/detail/scatter/ammjpmhgckkpcamddpolhchgomcojkle"));this.getClientType();window.scatter.getIdentity({accounts:[m.eosNetwork]}).then(function(n){n&&n.accounts.length>0&&(e.account=n.accounts.find(function(e){return"eos"===e.blockchain}),t.username=e.account.name,t.islogin=!0,t.$store.state.userName=t.account.name,t.$store.state.actionTime=(new Date).getTime(),t.$message({message:"登录成功",type:"success",duration:1500,center:!0}))}).catch(function(e){t.$message({message:"登录失败！",type:"error",duration:1500,center:!0})})},logout:function(){var e=this;window.scatter.forgetIdentity().then(function(){e.islogin=!1,e.$message({message:"退出成功！",type:"success",duration:1e3,center:!0})}),e.$store.commit("setUserName","")},checkIn:function(){var e=this;function t(t){e.login()}if(""!=e.$store.state.userName){var n=window.scatter.identity.accounts.find(function(e){return"eos"===e.blockchain}),a=window.scatter.eos(m.eosNetwork,d.a,m.eosOptions);a.transaction({actions:[{account:m.gameContract,name:"check",authorization:[{actor:n.name,permission:n.authority}],data:{account:n.name}}]}).then(function(t){e.$message({message:"签到成功！",type:"success",duration:1e3,center:!0}),e.$store.commit("setActionTime",(new Date).getTime())}).catch(function(t){e.$message({message:"签到失败！",type:"error",duration:1500,center:!0})})}else e.$message({message:"请先登录！",type:"warning",duration:1e3,center:!0,onClose:t})},handleClose:function(e){e()},getClientType:function(){var e=navigator.userAgent,t=window.location.href;this.parseUrl(t);return null!=e.match(/Windows|/i)?"window":null!=e.match(/Android/i)?"Android":null!=e.match(/iPhone|iPod/i)?"IOS":"WP"},parseUrl:function(e){var t=/(\w+)=([^\#&]*)/gi,n={};return e=e||window.location.href,e.replace(t,function(e,t,a){n[t]=decodeURI(a)}),n}},created:function(){var e=this;this.interval&&clearInterval(this.interval),e.eosClient=d()(m.eosOptions),e.$store.commit("setEosClient",d()(m.eosOptions)),document.addEventListener("scatterLoaded",function(t){var n=window.scatter;n.requireVersion(3),e.scatterEosClient=n.eos(m.eosNetwork,d.a,m.eosOptions),e.$store.commit("setScatterClient",e.scatterEosClient)}),this.interval=setInterval(function(){e.$store.commit("setActionTime",(new Date).getTime())},15e3)},beforeDestory:function(){clearInterval(this.interVal)}},p=f,g=(n("9028"),n("e5aa"),n("2877")),h=Object(g["a"])(p,c,l,!1,null,"104aacf6",null);h.options.__file="Navigation.vue";var b=h.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("current",{attrs:{id:"current"}})],1),n("div",{staticClass:"row"},[n("records")],1)])},_=[],w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid row"},[n("el-card",{attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("我的账户")])]),n("span",{staticClass:"col-md-1"},[e._v("内存:")]),n("el-progress",{staticClass:"col-md-3",attrs:{percentage:e.ram,color:"#8e71c7"}}),n("span",{staticClass:"col-md-1"},[e._v("cpu:")]),n("el-progress",{staticClass:"col-md-3",attrs:{percentage:e.cpu,color:"#8e71c7"}}),n("span",{staticClass:"col-md-1"},[e._v("网络:")]),n("el-progress",{staticClass:"col-md-3",attrs:{percentage:e.net,color:"#8e71c7"}}),n("div",{staticClass:"row"})],1)],1)},y=[],C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"account-resource__module"},[n("div",{staticClass:"account-resource__module--detail"},[n("span",[e._v(e._s(e.type[e.tIndex])+"  ")])]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.tip,placement:"top"}},[n("el-progress",{attrs:{type:"circle",percentage:e.percentage,width:80,color:"#8e71c7"}})],1)],1)},k=[],x={data:function(){return{btnText:"购买",type:["内存","CPU","网络"]}},props:{detail:"",percentage:0,tIndex:0,tip:""},mounted:function(){},methods:{buy:function(e){var t=this,n=t.tIndex;switch(n){case 0:console.log("这里是0");break;case 1:console.log("这里是1");break;case 2:console.log("这里是2");break;default:break}}}},I=x,R=(n("390e"),Object(g["a"])(I,C,k,!1,null,null,null));R.options.__file="ResourceModule.vue";var T=R.exports,$={components:{ResourceModule:T},data:function(){return{ram:10,cpu:10,net:10}},watch:{"$store.state.actionTime":function(){var e=this;if(""!=this.$store.state.userName){var t=this.$store.state.eosClient;t.getAccount({account_name:this.$store.state.userName}).then(function(t){var n=t.ram_usage,a=t.ram_quota,o=t.cpu_limit.available,r=t.cpu_limit.used,s=t.net_limit.available,i=t.net_limit.used;e.ram=-1==a?100:n/a*100,e.cpu=r/o*100,e.net=i/s*100,console.log(t)}).catch(function(e){return console.error(e)})}}}},S=$,N=(n("f2aa"),n("00a2"),Object(g["a"])(S,w,y,!1,null,"240fc6b3",null));N.options.__file="MyAccount.vue";var E,A,O=N.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"trading-container container-fluid row"},[n("el-card",{staticClass:"card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("投资")])]),n("invest")],1)],1)},j=[],D={},P=Object(g["a"])(D,E,A,!1,null,null,null);P.options.__file="Invest.vue";var V=P.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-slider",{attrs:{"show-input":"",step:10,"show-stop":"",min:1,max:1e3},model:{value:e.sell,callback:function(t){e.sell=t},expression:"sell"}}),a("img",{attrs:{src:n("65cb")}}),a("span",{staticStyle:{padding:"3% 2%"}},[e._v(e._s(e.listenbalance))]),a("el-button",{staticStyle:{float:"right",margin:"2%",padding:"2% 10%"},attrs:{type:"success"},on:{click:e.handleSell}},[e._v("卖出")])],1)},B=[],L={data:function(){return{sell:1}},methods:{handleSell:function(){var e=this;console.log(e.sell)}},computed:{listenbalance:function(){return this.$store.state.balance}}},M=L,X=(n("ea1b"),Object(g["a"])(M,U,B,!1,null,null,null));X.options.__file="Sell.vue";var q=X.exports,z={name:"app",components:{Invest:V,Sell:q},data:function(){return{activeName:"invest"}},methods:{handleClick:function(e,t){}}},G=z,Y=(n("a928"),Object(g["a"])(G,F,j,!1,null,null,null));Y.options.__file="TradingCenter.vue";var Q=Y.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid  row current"},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("游戏中心")])]),a("div",{staticClass:"container-fluid"},[a("el-carousel",{attrs:{arrow:"never","indicator-position":"none",interval:3e3,type:"card",height:"50px"}},e._l(3,function(t){return a("el-carousel-item",{key:t},[a("span",[e._v(e._s(e.lastLuckyInfo[t]))])])})),a("div",{staticClass:"current-block row"},[a("span",{staticClass:"demonstration col-md-2"},[e._v("第"+e._s(e.global.gameid)+"局进度")]),a("el-progress",{attrs:{"text-inside":!1,"stroke-width":18,percentage:e.progress}})],1),a("div",{staticClass:"current-block row"},[a("span",{staticClass:"demonstration col-md-3"},[e._v("空投概率")]),a("span",{staticClass:"drop-rate col-md-3"},[e._v(e._s(e.air_drop_prob)+"%")]),a("span",{staticClass:"demonstration col-md-3"},[e._v("空投次数")]),a("span",{staticClass:"drop-rate col-md-3"},[e._v(e._s(e.air_drop_count))])]),a("div",{staticClass:"current-block row"},[a("span",{staticClass:"demonstration col-md-3"},[e._v("下一次分红")]),a("span",{staticClass:"col-md-3"},[e._v(e._s(e.next_profit_sharing_time))]),a("button",{staticClass:"action_button action_button2 claim col-md-1",on:{click:e.getShares}},[e._v("领取")]),a("el-dialog",{attrs:{title:"分红",visible:e.dialogTableVisible,width:"90%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-table",{attrs:{data:e.shares}},[a("el-table-column",{attrs:{property:"id",label:"期号"}}),a("el-table-column",{attrs:{property:"end_time",label:"结束时间"}}),a("el-table-column",{attrs:{property:"eco_fund_snapshoot",label:"分红池"}}),a("el-table-column",{attrs:{property:"reward",label:"我的奖励"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.handleClaim(t.row)}}},[e._v("领取")])]}}])})],1)],1)],1),a("div",{staticClass:"invest-block",staticStyle:{"border-style":"solid","border-width":"10px","margin-top":"5px"}},[a("el-slider",{staticStyle:{margin:"15px 15px"},attrs:{"show-input":"",step:1,"show-stop":"",min:1,max:100},model:{value:e.invest,callback:function(t){e.invest=t},expression:"invest"}}),a("el-row",{attrs:{type:"flex",justify:"space-around",gutter:20}},[a("el-col",{attrs:{span:6}},[a("img",{staticClass:"eos_balance",attrs:{src:n("decb"),width:"15px"}}),a("span",{staticClass:"eos_balance",attrs:{balance:""}},[e._v(" "+e._s(e.balance))])]),a("el-col",{attrs:{span:6}},[a("button",{staticClass:"action_button action_button2 invest_btn",on:{click:e.handleInvest}},[e._v("投资")])]),a("el-col",{attrs:{span:6}},[a("img",{staticClass:"game_balance",attrs:{src:n("4e47"),width:"20px"}}),a("span",{staticClass:"game_balance",attrs:{balance:""}},[e._v(" "+e._s(e.game_balance))])])],1)],1)],1)])],1)},H=[],W=(n("3b2b"),{getUrlKey:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},compareDes:function(e,t){var n=e.gameid,a=t.gameid;return n<a?1:n>a?-1:0},compareAsc:function(e,t){var n=e.gameid,a=t.gameid;return n<a?-1:n>a?1:0}}),Z={data:function(){return{invest:1,balance:"",game_balance:"",lastLuckyInfo:{1:"虚位以待",2:"虚位以待",3:"虚位以待"},airDropRate:0,interVal:null,global:"",progress:0,air_drop_count:0,air_drop_prob:0,eco_fund_balance:"0 EOS",next_profit_sharing_time:"",total_dapp_token_hold:0,shares:[],dialogTableVisible:!1,myuniqueInfo:{},mycards:"本局未参与！",shareid:0}},methods:{handleInvest:function(){var e=this;if(e.$store.commit("setActionTime",(new Date).getTime()),""==this.$store.state.userName)return console.log("scatter is not login!"),void e.$message({message:"请先登录！",type:"warn",duration:1e3,center:!0});var t=W.getUrlKey("ref"),n=this.$store.state.userName,a=m.gameContract,o=this.invest.toFixed(4)+" "+m.mainToken,r=null==t?"":t,s=window.scatter.eos(m.eosNetwork,d.a,m.eosOptions);s.transfer({from:n,to:a,quantity:o,memo:r}).then(function(t){e.$message({message:"成功",type:"success",duration:1e3,center:!0}),e.$store.commit("setActionTime",(new Date).getTime)}).catch(function(t){e.$message({message:"转账失败",type:"error",duration:1e3,center:!0})})},handleClaim:function(e){var t=this;if(""!=t.$store.state.userName){var n=window.scatter.identity.accounts.find(function(e){return"eos"===e.blockchain}),a=window.scatter.eos(m.eosNetwork,d.a,m.eosOptions);a.transaction({actions:[{account:m.gameContract,name:"claim",authorization:[{actor:n.name,permission:n.authority}],data:{account:n.name,shareid:e.id}}]}).then(function(e){t.$message({message:"成功",type:"success",duration:1e3,center:!0}),t.getClaim()}).catch(function(e){console.error(e),t.$message({message:"失败！",type:"error",duration:1e3,center:!0})})}else t.$message({message:"请登陆",type:"warning",duration:2e3,center:!0})},getClaim:function(){var e=this,t=e.$store.state.eosClient;t.getTableRows({json:"true",code:m.gameContract,scope:e.$store.state.userName,table:"claims",limit:10,lower_bound:0}).then(function(t){var n=t.rows;if(n.length>0){var a=[];for(var o in n){var r=n[o],s=e.myuniqueInfo[r.share_id];s&&(s.reward=r.reward)}for(var i in e.myuniqueInfo)a.push(e.myuniqueInfo[i]);e.shares=a.reverse()}else console.log("claim is net exist!")}).catch(function(e){console.error(e)})},getShares:function(){this.dialogTableVisible=!0;var e=this,t=e.$store.state.eosClient,n=e.shareid<10?0:e.shareid-9;t.getTableRows({json:"true",code:m.gameContract,scope:m.gameContract,table:"shares",limit:10,lower_bound:n}).then(function(t){if(t.rows.length<1)console.log("no history record!");else{var n=t.rows;e.shares=n.map(function(t){return t.end_time=new Date(1e3*t.end_time).toLocaleString().replace(/:\d{1,2}$/," "),e.myuniqueInfo[t.id]||(e.myuniqueInfo[t.id]=t),t}).reverse(),e.getClaim()}}).catch(function(e){console.error(e)})},getGlobalInfo:function(){var e=this,t=e.$store.state.eosClient;t.getTableRows({json:"true",code:m.gameContract,scope:m.gameContract,table:"global",limit:10,lower_bound:0}).then(function(n){if(n.rows&&n.rows.length>0){var a=n.rows[0];e.global=a,e.$store.commit("setGlobalInfo",e.global),e.progress=a.operator_count%100,e.air_drop_count=a.air_drop_count,e.air_drop_prob=a.air_drop_prob,e.eco_fund_balance=a.eco_fund_balance,e.next_profit_sharing_time=new Date(1e3*a.next_profit_sharing_time).toLocaleString().replace(/:\d{1,2}$/," "),e.total_dapp_token_hold=a.total_dapp_token_hold,e.shareid=a.shareid,console.log(a.shareid),t.getTableRows({json:"true",code:m.gameContract,scope:m.gameContract,table:"game",upper_bound:a.gameid,lower_bound:a.gameid-1}).then(function(t){var n=t.rows[0];if(n){var a={1:"一等奖:\n"+parseFloat(n.lucky_reward_1)+"EOS/"+n.lucky_man_1,2:"二等奖: \n"+parseFloat(n.lucky_reward_2)+"EOS/"+n.lucky_man_2,3:"三等奖: \n"+parseFloat(n.lucky_reward_3)+"EOS/"+n.lucky_man_3};e.lastLuckyInfo=a}}).catch(function(e){console.error(e)})}}).catch(function(e){console.error(e)})}},created:function(){var e=this;e.getGlobalInfo()},watch:{"$store.state.actionTime":function(){var e=this;this.getGlobalInfo(),""!=this.$store.state.userName&&(this.$store.state.eosClient.getCurrencyBalance({account:this.$store.state.userName,code:m.tokenContract,symbol:m.mainToken}).then(function(t){e.balance=t[0]}),this.$store.state.eosClient.getCurrencyBalance({account:this.$store.state.userName,code:m.gameTokenContract,symbol:m.gameToken}).then(function(t){e.game_balance=t[0]}))},"$store.state.globalInfo":function(){if(""!=this.$store.state.globalInfo){var e=this;e.$store.state.eosClient.getTableRows({json:"true",code:m.gameContract,scope:e.$store.state.globalInfo.gameid,table:"round",limit:20,lower_bound:0}).then(function(t){var n="本局幸运卡: ",a=[],o=!1;if(t.rows&&t.rows.length>0){var r=t.rows;r.filter(function(t){if(t.player_name==e.$store.state.userName)return o=!0,!0}).map(function(e){a.push(e.lucky_num)}),e.mycards=o?n+a.join():e.mycards}}).catch(function(e){console.error(e)})}}},beforeDestory:function(){clearInterval(this.interVal)}},K=Z,ee=(n("73a1"),n("a590"),Object(g["a"])(K,J,H,!1,null,"3559b647",null));ee.options.__file="Current.vue";var te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("交易记录")])]),n("el-tabs",{attrs:{height:"250","highlight-current-row":"",stripe:"",type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"我的记录",name:"myRecord"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{"default-sort":{prop:"gameid",order:"descending"},data:e.myRecord,"highlight-current-row":e.highlight}},[n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"gameid",label:"期号"}}),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"myCurrentCards",label:"我的幸运号"}}),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"last_action_time",label:"结束时间"}})],1)],1),n("el-tab-pane",{attrs:{label:"历史中奖记录",name:"history"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.history,"highlight-current-row":e.highlight}},[n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"gameid",label:"期号"}}),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"lucky_man_1",label:"一等奖"}}),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"lucky_man_2",label:"二等奖"}}),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"lucky_man_3",label:"三等奖"}}),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"end_time",label:"结束时间"}})],1)],1)],1)],1)],1)},ae=[],oe=(n("55dd"),{data:function(){return{activeName:"history",highlight:!1,interVal:null,myRecord:[],myuniqRecord:{},history:[],sold:[{date:(new Date).getTime(),name:"zhangsantest",number:"123456",payout:"3.0000"},{date:(new Date).getTime(),name:"zhangsantest",number:"123456",payout:"3.0000"},{date:(new Date).getTime(),name:"zhangsantest",number:"123456",payout:"3.0000"},{date:(new Date).getTime(),name:"zhangsantest",number:"123456",payout:"3.0000"},{date:(new Date).getTime(),name:"zhangsantest",number:"123456",payout:"3.0000"},{date:(new Date).getTime(),name:"zhangsantest",number:"123456",payout:"3.0000"}]}},methods:{handleClick:function(e,t){},getGameRecord:function(){var e=this,t=e.$store.state.eosClient;t.getActions({account_name:m.gameContract,pos:-1,offset:-100}).then(function(t){e.sold=t.actions.map(function(e){return e.action_trace.act}).filter(function(e){return e.account==m.tokenContract&&"transfer"==e.name&&e.data.to==m.gameContract||(e.account==m.gameContract&&"sell"==e.name||e.account==m.gameContract&&"destroy"==e.name)})},function(e){console.log(e)});var n=e.$store.state.globalInfo.gameid;if(n){var a=n-9>0?n-9:0;t.getTableRows({json:"true",code:m.gameContract,scope:m.gameContract,table:"game",limit:10,lower_bound:a}).then(function(t){if(t.rows.length<2)console.log("no history record!");else{var n=t.rows;n.pop();var a=n[n.length-1];if(a){var o={1:"一等奖:\n"+parseFloat(a.lucky_reward_1)+"EOS/"+a.lucky_man_1,2:"二等奖: \n"+parseFloat(a.lucky_reward_2)+"EOS/"+a.lucky_man_2,3:"三等奖: \n"+parseFloat(a.lucky_reward_3)+"EOS/"+a.lucky_man_3};e.$store.commit("setRecentRewardInfo",o),e.history=n.map(function(e){return e.end_time=new Date(1e3*e.end_time).toLocaleString().replace(/:\d{1,2}$/," "),e}).reverse()}}}).catch(function(e){console.error(e)})}},getMyRecord:function(){var e=this,t=e.$store.state.eosClient;if(""!=e.$store.state.userName){var n=e.$store.state.globalInfo.gameid;if(n){var a=n-9>0?n-9:0;t.getTableRows({json:"true",code:m.gameContract,scope:e.$store.state.userName,table:"usergames",limit:10,lower_bound:a}).then(function(t){if(t.rows.length<1)console.log("no history record!");else{var n=t.rows;n.map(function(t){return t.last_action_time=new Date(1e3*t.last_action_time).toLocaleString().replace(/:\d{1,2}$/," "),e.myuniqRecord[t.gameid]||e.getRoundInfo(t),t})}}).catch(function(e){console.error(e)})}}},getRoundInfo:function(e){var t=this;t.$store.state.eosClient.getTableRows({json:"true",code:m.gameContract,scope:e.gameid,table:"round",limit:100,lower_bound:0}).then(function(n){var a="本局未参与！",o=!1;if(n.rows&&n.rows.length>0){var r=n.rows;r.filter(function(e){if(e.player_name==t.$store.state.userName)return o=!0,a="",!0}).map(function(e){a+=e.lucky_num+" | "}),e.myCurrentCards=o?a:t.mycards,t.myuniqRecord[e.gameid]=e;var s=[];for(var i in t.myuniqRecord)s.push(t.myuniqRecord[i]);t.myRecord=s.sort(W.compareAsc)}}).catch(function(e){console.error(e)})}},watch:{"$store.state.globalInfo":function(){this.getGameRecord(),this.getMyRecord()},"$store.state.actionTime":function(){""!=this.$store.state.userName&&this.getMyRecord()}},beforeDestory:function(){}}),re=oe,se=(n("87ca"),Object(g["a"])(re,ne,ae,!1,null,null,null));se.options.__file="Records.vue";var ie=se.exports,ce={name:"app",components:{MyAccount:O,TradingCenter:Q,Current:te,Records:ie}},le=ce,ue=(n("adb0"),Object(g["a"])(le,v,_,!1,null,null,null));ue.options.__file="Trading.vue";var de=ue.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer-basic",attrs:{id:"footer"}},[n("footer",[n("p",{staticClass:"copyright"},[e._v(e._s(e.config.appName)+" © 2018")])])])},fe=[],pe={data:function(){return{config:m}}},ge=pe,he=(n("1623"),n("ab4a"),Object(g["a"])(ge,me,fe,!1,null,"66592036",null));he.options.__file="PageFooter.vue";var be=he.exports,ve={name:"app",components:{Navigation:b,Trading:de,PageFooter:be},beforeCreate:function(){window.outerWidth}},_e=ve,we=(n("034f"),Object(g["a"])(_e,s,i,!1,null,null,null));we.options.__file="App.vue";var ye=we.exports,Ce=(n("4dcb"),n("2f62")),ke={state:{userName:"",balance:"",userInfo:{},scatterEosClient:null,eosClient:"",recentRewardInfo:"",actionTime:0,globalInfo:"",lowerBound:0},mutations:{setScatterClient:function(e,t){e.scatterEosClient=t},setEosClient:function(e,t){e.eosClient=t},setUserInfo:function(e,t){e.userInfo=t},setUserName:function(e,t){e.userName=t},setBalance:function(e,t){e.balance=t},setRecentRewardInfo:function(e,t){e.recentRewardInfo=t},setActionTime:function(e,t){e.actionTime=t},setGlobalInfo:function(e,t){e.globalInfo=t},setLowerBound:function(e,t){e.lowerBound=t}}},xe=ke,Ie=n("ecee"),Re=n("c074"),Te=n("7a55"),$e=n("42b9");n("ed75");a["default"].use(o["Button"]),Ie["library"].add(Re["a"],$e["a"]),a["default"].component("font-awesome-icon",Te["FontAwesomeIcon"]),a["default"].prototype.$message=o["Message"],a["default"].use(r.a),a["default"].use(Ce["a"]),a["default"].config.productionTip=!1;var Se=new Ce["a"].Store(xe);new a["default"]({store:Se,render:function(e){return e(ye)}}).$mount("#app")},"5a16":function(e,t,n){},"5e37":function(e,t,n){},6106:function(e,t,n){},"632f":function(e,t,n){},"65cb":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAEIUlEQVRIS41WW2xUVRRd68z0IWg7t/6giFLaGYw/BInB+DZYpD+YGEyMQQRFsTMVghFMVCJpgonRII/O1BqVID4iSgNGRZGoJMCP+gFRlLkdi4AGROdOI6XtdOYsMwPl0d5bvb9nnbXOWWfvtS8xxud0Zmpl7VwK8yhFAU4EZAD+ISpNcXuRlV298eu8IBr6LYzrPHJVdaHwLKBmQF9Ymm9IdMPwmBcespcPmGvCNFMh3UbiXoB7WdCa7NLo8ZF8owRqU5l7Qih2SdziDVY/g6cn9Y91S2xVKPJ39yMUXpTM8lyioeti/CUCkVR6EYFXATPfizfuHJN4xGKko2cy7dDXgFnrJRrbh5fPC0RS7p1Get+ailtzLfVHAsnfOTEeCyb0BVlbVczvF7gsF49+UsKUBWrePFYXHhw4IMNmr6XxxyDySLt7n6ES2URsdhCmttNtCBXwbb+xN/e3TP29LFCXdNeC6svGY6sCyTt6JhsNHQR4hQUX5uKNm4OwTiq9gsIN2URsEes2uDUKK4NQqNFb0tDru6lTFU7R/Y7gNAmDIAbyFaGpfY9POemL39RT7ZwpHCU4g5Fk9wJSTV48+nDQieqS3etALbNWBwizi0YrAG3LxmPzgm/htkM4RCeV/sASH/e2xLb5gWs3HqkPmfyHIG+yFm8bao6lOUmohgZzs09GD/nua8/MMqa4nE7S3c8QFgcB61LuYggPWPIMpWYSVRbaRLAe0j4vEXvBT+CyjsMTq635kk4y/SvCoelB/jupdCfASRBAorlEVn4HaCOJO7Lx2ExfmyQ6He6fZQHLqhlBeeIk3R8AnQA4gcSNZQEob41ZHyqq1ebDV+eW1+dGiZwXSLl7afCEr0Xl6unOQLACdhvisXNEuwTdBfB7Auuy8ehHIwXOWbSTTsp9j8B2P1BNe3pmmFgDcpYFthigXGlFsjMkLYFwXNBmv3eofT3dZCyWlQTmQ5jjJaLzR54i0uFON1arRNYBOEppvMgrIX0FsuksXp958dgrI/c6STcJ8OfhRuvRYEXDKC9LPqYyzwFqI2EkfU5iGsQ+EDEJO7xx4QexqH7gEoGLG+1sVKTXizztxaPP+1VEKQgJdUHcJ+EvGiyk0JZNRFf74Z1keiXJ67Px6KMXwi7ff1A0c4LC7tyjvVSUzRiYA7nW6A7fBiuFXVF78gVOP700eupCXCe77zaw71qFb8m1TvnNt7a3/lSJE5XE0uhgYHOJe0E85bXEPi1hRg0cI7YNhcNN/yyp/yUoZ4JsNMBWS63JtcQ2DGN8R6aBfQvCy96pxjewmoUxhTa4VU6IbaRarcVDI60LHvrFoZUAZkPaPTz0OaSj2VCtrQv1XmstY4BuN1KzaPb876F/8Wkjr/VEUFmcS+h+QrFLfluAwwR2/Ndvy7/Txf8rsl6TAQAAAABJRU5ErkJggg=="},"73a1":function(e,t,n){"use strict";var a=n("bf7e"),o=n.n(a);o.a},"75d6":function(e,t,n){e.exports=n.p+"img/fairicon.b52b9825.png"},"87ca":function(e,t,n){"use strict";var a=n("fef9"),o=n.n(a);o.a},9028:function(e,t,n){"use strict";var a=n("cf30"),o=n.n(a);o.a},"97d1":function(e,t,n){},a590:function(e,t,n){"use strict";var a=n("5a16"),o=n.n(a);o.a},a928:function(e,t,n){"use strict";var a=n("b6cb"),o=n.n(a);o.a},ab4a:function(e,t,n){"use strict";var a=n("26ac"),o=n.n(a);o.a},adb0:function(e,t,n){"use strict";var a=n("6106"),o=n.n(a);o.a},b205:function(e,t,n){},b6cb:function(e,t,n){},bf7e:function(e,t,n){},c21b:function(e,t,n){},cf30:function(e,t,n){},decb:function(e,t,n){e.exports=n.p+"img/eos.90a08310.png"},e5aa:function(e,t,n){"use strict";var a=n("5e37"),o=n.n(a);o.a},ea1b:function(e,t,n){"use strict";var a=n("1524"),o=n.n(a);o.a},ed75:function(e,t,n){},f2aa:function(e,t,n){"use strict";var a=n("b205"),o=n.n(a);o.a},fef9:function(e,t,n){}});
//# sourceMappingURL=app.cdbd5675.js.map